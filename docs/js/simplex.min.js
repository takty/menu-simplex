window.menu_simplex=window.menu_simplex??{},window.menu_simplex=function(e=null,t={}){const n="active",o="opened",s="--max-width",l="--foldable",i=e?document.getElementById(e):document.getElementsByClassName("menu-simplex")[0];if(!i)return;const r=i.querySelector(".menu")??i.getElementsByTagName("ul")[0];if(!r)return;const a=t.autoClose??!0,c=t.reversed??!1,d=t.buttonPosition??"end";let u=0,m=[];const p=[];function f(e,t=!1){t&&e(),p.push(function(e){let t;function n(){t=!1,e()}return()=>{t||(t=!0,requestAnimationFrame(n))}}(e))}document.addEventListener("DOMContentLoaded",(()=>{window.addEventListener("scroll",(()=>{for(const e of p)e()}),{passive:!0})}));let g=!1;function y(e){if(g===e)return;g=e;const t=e?("scrollingElement"in document?document.scrollingElement:document.documentElement).scrollTop:parseInt(document.body.style.top??"0"),n=getComputedStyle(document.body),o={position:"fixed",top:-t+"px",left:"0",width:`calc(100vw - ${parseFloat(n.marginInlineStart)+parseFloat(n.marginInlineEnd)}px)`,height:"100dvh","overflow-y":"scroll"};for(const[t,n]of Object.entries(o))document.body.style[t]=e?n:null;e||window.scrollTo(0,-t)}const h=function(e,t){let n=e.querySelector("li.hamburger");n||(n=document.createElement("li"),n.classList.add("hamburger"),"end"===t?e.append(n):"start"===t&&e.prepend(n));let o=n.querySelector("button:first-of-type");o||(o=document.createElement("button"),n.appendChild(o));let s=n.querySelector("button + ul");s||(s=document.createElement("ul"),s.classList.add("menu"),n.appendChild(s));return s}(r,d),E=Array.from(r.querySelectorAll(":scope > li")),L=E.findIndex((e=>e.classList.contains("hamburger"))),b=function(e,t,n){const s=[];for(const n of t){const t=n.querySelector(":scope > button");if(!t)continue;const l=t.nextElementSibling;if(l){if(t.setAttribute("area-expanded","false"),!l.id){const e=t.id?t.id:n.id?n.id:"";e&&(l.id=e+"-sub")}l.id&&t.setAttribute("area-controls",l.id),t.addEventListener("click",(l=>{t.classList.contains(o)?A(t):(e===n.parentElement&&N(s,t),C(t),u=window.scrollY),l.stopPropagation()})),s.push(t)}}window.addEventListener("keydown",(e=>{"Escape"===e.key&&m.length&&m[m.length-1].click()})),n&&(f((()=>function(e,t,n){const o=e.getBoundingClientRect();(o.bottom<0||0<o.top&&o.bottom<Math.abs(window.scrollY-n))&&N(t)}(e,s,u))),document.addEventListener("click",(()=>N(s))));return s}(r,E,a),w=function(e,t){const n=new Array(e.length);for(let t=0;t<e.length;t+=1)n[t]=S(e[t],e.length-t);const o=new Array(e.length);for(let t=0;t<e.length;t+=1)o[t]=t;o.sort(((e,t)=>n[e]<n[t]?1:n[e]>n[t]?-1:0)),t&&o.reverse();return o}(E,c);for(const e of E)e.addEventListener("click",(()=>N(b)));!function(e,t,n,o=null,s=null){const l=e=>{if("mouse"===e.pointerType&&!e.target.classList.contains(t)&&(e.target.classList.add(n),s))for(let t=e.target.parentElement;t&&t!==o;t=t.parentElement)t.classList.contains(n)&&t.classList.add(s)},i=e=>{if("mouse"===e.pointerType&&!e.target.classList.contains(t)&&(e.target.classList.remove(n),s))for(let t=e.target.parentElement;t&&t!==o;t=t.parentElement)t.classList.contains(n)&&t.classList.remove(s)};for(const t of e)t.addEventListener("pointerenter",l),t.addEventListener("pointerleave",i)}(E,"current","hover");let v=!1,x=[];function S(e,t){const n=e.className.split(" ");let o=null;for(const e of n){const t=parseInt(e,10);isNaN(t)||(null===o||o<t)&&(o=t)}return o??t}function C(e){console.log("> open");const t=e.parentElement,s=e.nextElementSibling;s&&(t.classList.add(o),e.classList.add(o),e.setAttribute("area-expanded","true"),s.classList.add(n),setTimeout((()=>{s.classList.add(o)}),0),m.push(e),v=!0,y(!0))}function A(e){console.log("> close");const t=e.parentElement,s=e.nextElementSibling;s&&(t.classList.remove(o),e.classList.remove(o),e.setAttribute("area-expanded","false"),s.classList.remove(o),setTimeout((()=>{s.classList.remove(n)}),200),m.pop(),v=!0,y(!1))}function N(e,t=null){console.log("> closeAll");for(const n of e)t!==n&&A(n);m.length=0,v=!0,y(!1)}setTimeout((()=>{x=E.map((e=>e.offsetWidth));const e=new ResizeObserver((()=>{requestAnimationFrame((()=>{if(console.log("> resize"),v)return void(v=!1);!function(e){const t=parseFloat(e.style.getPropertyValue(s)),n=e.parentElement,o=getComputedStyle(n),l=n.clientWidth-(parseFloat(o.paddingLeft)+parseFloat(o.paddingRight));e.style.setProperty(s,`${Math.floor(l)}px`),isNaN(t)}(i);v||(N(b),function(e,t,n,o,s,i){t.style.width="0";const r=Math.floor(t.parentElement.getBoundingClientRect().width);t.style.width=null;let a=parseInt(getComputedStyle(t).columnGap,10);a=Number.isNaN(a)?0:a;const c=function(e,t,n,o,s){const l=new Array(t.length),i=t.reduce(((e,t)=>e+t))+o*(t.length-1)-(t[s]+o);if(e<i){e-=t[s],l[s]=!0;for(const i of n)i!==s&&(e-=t[i]+o,l[i]=0<=e)}else l.fill(!0),l[s]=!1;return l}(r,e,i,a,s);"false"===getComputedStyle(t).getPropertyValue(l).trim()&&(c.fill(!0),c[s]=!1);o[s].style.display=c[s]?null:"none";let d=t.firstChild;for(let l=0;l<o.length;l+=1){const i=o[l];c[l]?(i.parentElement===t&&(e[l]=i.offsetWidth),t.insertBefore(i,d.nextElementSibling),d=i):l!==s&&n.appendChild(i)}}(x,r,h,E,L,w))}))}));e.observe(i),e.observe(i.parentElement)}),10),setTimeout((()=>i.classList.add("ready")),100)};
//# sourceMappingURL=simplex.min.js.map