{
  "version": 3,
  "sources": ["../src/menu-simplex.ts"],
  "sourcesContent": ["/**\n * Menu Simplex (Progressively collapsing menu)\n *\n * @author Takuto Yanagida\n * @version 2024-02-16\n */\n\nexport class MenuSimplex {\n\n\tstatic NS = 'menu-simplex';\n\n\tstatic CLS_PANEL       = 'panel';\n\tstatic CLS_PANEL_POPUP = 'panel-popup';\n\tstatic CLS_PANEL_MORE  = 'panel-more';\n\tstatic CLS_MENU        = 'menu';\n\tstatic CLS_MENU_BAR    = 'menu-bar';\n\tstatic CLS_MENU_POPUP  = 'menu-popup';\n\tstatic CLS_MENU_MORE   = 'menu-more';\n\tstatic CLS_FOCUS_TRAP  = 'focus-trap';\n\n\tstatic CLS_DO_WRAP_PANEL = 'do-wrap-panel';\n\n\tstatic CP_IS_CLOSED_AUTO = '--is-closed-auto';\n\tstatic CP_IS_BG_FIXED    = '--is-background-fixed';\n\tstatic CP_IS_REVERSED    = '--is-reversed';\n\tstatic CP_MORE_POS       = '--more-position';\n\tstatic CP_COLLAPSED      = '--collapsed';\n\n\tstatic CLS_MORE    = 'more';\n\tstatic CLS_CURRENT = 'current';\n\n\tstatic CLS_READY            = 'ready';\n\tstatic CLS_HOVER            = 'hover';\n\tstatic CLS_HOVER_ANCESTOR   = 'hover-ancestor';\n\tstatic CLS_ACTIVE           = 'active';\n\tstatic CLS_OPENED           = 'opened';\n\tstatic CLS_IS_COLLAPSED     = 'is-collapsed';\n\tstatic CLS_IS_COLLAPSED_ALL = 'is-collapsed-all';\n\n\tstatic CLS_IN_BAR  = 'in-bar';\n\tstatic CLS_IN_MORE = 'in-more';\n\n\tstatic CP_MAX_WIDTH = '--max-width';\n\n\n\t// -------------------------------------------------------------------------\n\n\n\tprivate static throttle(fn: Function): () => void {\n\t\tlet isRunning: boolean;\n\t\tfunction run() {\n\t\t\tisRunning = false;\n\t\t\tfn();\n\t\t}\n\t\treturn () => {\n\t\t\tif (isRunning) return;\n\t\t\tisRunning = true;\n\t\t\trequestAnimationFrame(run);\n\t\t};\n\t}\n\n\tprivate static wrapElement(tars: HTMLElement[], tn: string) {\n\t\tconst p = tars.at(0)?.parentNode;\n\t\tconst s = tars.at(-1)?.nextSibling;\n\n\t\tconst w = document.createElement(tn);\n\t\tfor (const tar of tars) w.appendChild(tar);\n\t\tif (s) {\n\t\t\tp?.insertBefore(w, s);\n\t\t} else {\n\t\t\tp?.appendChild(w);\n\t\t}\n\t\treturn w;\n\t}\n\n\tprivate static addHoverStateEventListener(root: HTMLElement, elms: Element[]) {\n\t\tconst enter = (e: PointerEvent) => {\n\t\t\tconst li = (e.target as HTMLElement).parentElement;\n\n\t\t\tif (li && 'mouse' === e.pointerType && !li.classList.contains(MenuSimplex.CLS_CURRENT)) {\n\t\t\t\tli.classList.add(MenuSimplex.CLS_HOVER);\n\t\t\t\tfor (let elm = li.parentElement; elm && elm !== root; elm = elm.parentElement) {\n\t\t\t\t\tif ('LI' === elm.tagName) {\n\t\t\t\t\t\telm.classList.add(MenuSimplex.CLS_HOVER_ANCESTOR);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst leave = (e: PointerEvent) => {\n\t\t\tconst li = (e.target as HTMLElement).parentElement;\n\n\t\t\tif (li && 'mouse' === e.pointerType && !li.classList.contains(MenuSimplex.CLS_CURRENT)) {\n\t\t\t\tli.classList.remove(MenuSimplex.CLS_HOVER);\n\t\t\t\tfor (let elm = li.parentElement; elm && elm !== root; elm = elm.parentElement) {\n\t\t\t\t\tif ('LI' === elm.tagName) {\n\t\t\t\t\t\telm.classList.remove(MenuSimplex.CLS_HOVER_ANCESTOR);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor (const it of elms) {\n\t\t\tconst fec = it.firstElementChild as HTMLElement;\n\t\t\tif (fec) {\n\t\t\t\tfec.addEventListener('pointerenter', enter);\n\t\t\t\tfec.addEventListener('pointerleave', leave);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate static cancelUnexpectedClose(e: MouseEvent) {\n\t\tlet f: HTMLElement|null = e.target as HTMLElement;\n\t\twhile (f) {\n\t\t\tif (f.classList.contains('menu')) break;\n\t\t\tif ('A' === f.tagName) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tf = f.parentElement\n\t\t}\n\t\te.stopPropagation();\n\t}\n\n\tprivate static fixed: boolean;\n\n\tprivate static fixBackground(enabled: boolean) {\n\t\tif (MenuSimplex.fixed === enabled) return;\n\t\tMenuSimplex.fixed = enabled;\n\n\t\tconst scrollingElement = () => {\n\t\t\treturn ('scrollingElement' in document) ? document.scrollingElement : (<Document>document).documentElement;\n\t\t};\n\t\tconst se = scrollingElement();\n\t\tif (!se) return;\n\t\tconst sy = enabled ? se.scrollTop : parseInt(document.body.style.top ?? '0');\n\t\tconst cs = getComputedStyle(document.body);\n\t\tconst mw = parseFloat(cs.marginInlineStart) + parseFloat(cs.marginInlineEnd);\n\t\tconst ss = {\n\t\t\tposition: 'fixed',\n\t\t\ttop     : `${-sy}px`,\n\t\t\tleft    : '0',\n\t\t\twidth   : `calc(100vw - ${mw}px)`,\n\t\t\theight  : '100dvh',\n\n\t\t\t'overflow-y': 'scroll',  // For keeping scroll bar width.\n\t\t};\n\t\tfor (const [key, value] of Object.entries(ss)) {\n\t\t\t(document.body.style as any)[key] = enabled ? value : '';\n\t\t}\n\t\tif (!enabled) {\n\t\t\twindow.scrollTo(0, -sy);\n\t\t}\n\t}\n\n\tprivate static getStylePropertyBool(elm: HTMLElement, prop: string): boolean|null {\n\t\tlet v = getComputedStyle(elm).getPropertyValue(prop).trim();\n\t\tif (('\"' === v.at(0) && '\"' === v.at(-1)) || (\"'\" === v.at(0) && \"'\" === v.at(-1))) {\n\t\t\tv = v.slice(1, -1);\n\t\t}\n\t\tif (!v.length) return null;\n\t\tif (typeof v !== 'string') return Boolean(v);\n\t\ttry {\n\t\t\treturn true === JSON.parse(v.toLowerCase());\n\t\t} catch(e) {\n\t\t\treturn v.length !== 0;\n\t\t}\n\t}\n\n\tprivate static getStylePropertyString(elm: HTMLElement, prop: string): string|null {\n\t\tconst v = getComputedStyle(elm).getPropertyValue(prop).trim().replace(new RegExp('^\\\"+|\\\"+$', 'g'), '');\n\t\tif (!v.length) return null;\n\t\treturn (typeof v === 'string') ? v : String(v);\n\t}\n\n\n\t// -------------------------------------------------------------------------\n\n\n\t#divRoot    : HTMLElement;\n\t#ulBar      : HTMLElement;\n\t#ulMore     : HTMLElement;\n\t#liFocusTrap: HTMLElement;\n\n\t#moreIdx: number;\n\n\t#scrollY: number = 0;\n\t#curIts : Item[] = [];\n\n\t#skipResize : boolean = false;\n\t#doWrapPanel: boolean = false;\n\n\tconstructor(id: string|null = null) {\n\t\tconst divRoot = id ? document.getElementById(id) : document.getElementsByClassName(MenuSimplex.NS)[0];\n\t\tif (!divRoot) throw new DOMException();\n\t\tthis.#divRoot = divRoot as HTMLElement;\n\t\tthis.#ulBar   = this.#divRoot.getElementsByTagName('ul')[0];\n\t\tif (!this.#ulBar) throw new DOMException();\n\t\tthis.#ulBar.classList.add(MenuSimplex.CLS_MENU, MenuSimplex.CLS_MENU_BAR);\n\n\t\tif (!this.#divRoot.classList.contains(MenuSimplex.NS)) {\n\t\t\tthis.#divRoot.classList.add(MenuSimplex.NS);\n\t\t}\n\t\tthis.#doWrapPanel = this.#divRoot.classList.contains(MenuSimplex.CLS_DO_WRAP_PANEL);\n\n\t\t[this.#ulMore, this.#moreIdx] = this.initMore();\n\t\tconst its = this.initBarItems(this.#ulMore);\n\t\tthis.initPanel(its);\n\t\tconst order = this.initOrder(its);\n\t\tthis.#liFocusTrap = this.initFocusTrap();\n\n\t\tconst allLis = Array.from(this.#ulBar.querySelectorAll('li'));\n\t\tMenuSimplex.addHoverStateEventListener(this.#divRoot, allLis);\n\n\t\tconst onResize = () => {\n\t\t\tif (this.#skipResize) {\n\t\t\t\tthis.#skipResize = false;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.closeAll(its);\n\t\t\tthis.alignItems(its, order);\n\t\t};\n\t\tsetTimeout(() => {\n\t\t\tconst ro = new ResizeObserver(() => requestAnimationFrame(onResize));\n\t\t\tro.observe(this.#divRoot);\n\t\t\tro.observe(this.#divRoot.parentElement as HTMLElement);\n\t\t}, 10);\n\t\tsetTimeout(() => this.#divRoot.classList.add(MenuSimplex.CLS_READY), 100);\n\t}\n\n\tprivate initMore(): [HTMLElement, number] {\n\t\tlet li: HTMLElement|null = null;\n\t\tlet idx = 0;\n\t\tfor (const e of Array.from(this.#ulBar.children)) {\n\t\t\tif (e.classList.contains(MenuSimplex.CLS_MORE)) {\n\t\t\t\tli = e as HTMLElement;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tidx += 1;\n\t\t}\n\t\tif (!li) {\n\t\t\tli = document.createElement('li');\n\t\t\tli.classList.add(MenuSimplex.CLS_MORE);\n\n\t\t\tconst pos = MenuSimplex.getStylePropertyString(this.#divRoot, MenuSimplex.CP_MORE_POS);\n\t\t\tif (null === pos || 'end' === pos) {\n\t\t\t\tthis.#ulBar.append(li);\n\t\t\t\tidx = this.#ulBar.children.length - 1;\n\t\t\t} else if ('start' === pos) {\n\t\t\t\tthis.#ulBar.prepend(li);\n\t\t\t\tidx = 0;\n\t\t\t}\n\t\t}\n\t\tlet btn = li.querySelector(':scope > button');\n\t\tif (!btn) {\n\t\t\tbtn = document.createElement('button');\n\t\t\tbtn.setAttribute('title', 'More');\n\t\t\tli.insertBefore(btn, li.firstChild);\n\t\t}\n\t\tconst uls = li.querySelectorAll(':scope > ul, :scope > div > ul');\n\t\tlet menu = Array.from(uls).find(e => !e.children.length) as HTMLElement;\n\t\tif (!menu) {\n\t\t\tmenu = document.createElement('ul');\n\t\t\tlet d = li.querySelector(':scope > div');\n\t\t\tif (d) {\n\t\t\t\td.appendChild(menu);\n\t\t\t} else {\n\t\t\t\tli.appendChild(menu);\n\t\t\t}\n\t\t}\n\t\tlet panel = (menu.parentElement === li) ? menu : (menu.parentElement as HTMLElement);\n\t\tif (this.#doWrapPanel && panel === menu) {\n\t\t\tpanel = MenuSimplex.wrapElement(Array.from(li.children).filter(e => e !== btn) as HTMLElement[], 'div');\n\t\t}\n\t\tpanel.classList.add(MenuSimplex.CLS_PANEL, MenuSimplex.CLS_PANEL_MORE);\n\t\tpanel.addEventListener('click', e => MenuSimplex.cancelUnexpectedClose(e));\n\t\tmenu.classList.add(MenuSimplex.CLS_MENU, MenuSimplex.CLS_MENU_MORE);\n\t\treturn [menu, idx];\n\t}\n\n\tprivate initBarItems(menuMore: HTMLElement): Item[] {\n\t\tconst its: Item[] = [];\n\n\t\tfor (const li of this.#ulBar.querySelectorAll(':scope > li')) {\n\t\t\tconst btn = li.querySelector(':scope > button') as HTMLElement;\n\t\t\tlet menu  = null;\n\t\t\tlet panel = null;\n\n\t\t\tif (li.classList.contains(MenuSimplex.CLS_MORE)) {\n\t\t\t\tmenu  = menuMore;\n\t\t\t\tpanel = (menu.parentElement === li) ? menu : (menu.parentElement as HTMLElement);\n\t\t\t} else {\n\t\t\t\tmenu = li.querySelector(':scope > ul, :scope > div > ul') as HTMLElement;\n\t\t\t\tif (menu) {\n\t\t\t\t\tpanel = (menu.parentElement === li) ? menu : (menu.parentElement as HTMLElement);\n\t\t\t\t\tif (this.#doWrapPanel && panel === menu) {\n\t\t\t\t\t\tpanel = MenuSimplex.wrapElement([menu], 'div');\n\t\t\t\t\t}\n\t\t\t\t\tpanel.classList.add(MenuSimplex.CLS_PANEL, MenuSimplex.CLS_PANEL_POPUP);\n\t\t\t\t\tpanel.addEventListener('click', e => MenuSimplex.cancelUnexpectedClose(e));\n\t\t\t\t\tmenu.classList.add(MenuSimplex.CLS_MENU, MenuSimplex.CLS_MENU_POPUP);\n\t\t\t\t}\n\t\t\t}\n\t\t\tits.push(new Item(li as HTMLElement, btn, panel, menu, 0));\n\t\t}\n\t\treturn its;\n\t}\n\n\tprivate initPanel(its: Item[]) {\n\t\tfor (const it of its) {\n\t\t\tconst { li, btn, panel } = it;\n\t\t\tif (!btn || !panel) continue;\n\n\t\t\tbtn.setAttribute('area-expanded', 'false');\n\t\t\tif (!panel.id) {\n\t\t\t\tconst id = btn.id ? btn.id : (li.id ? li.id : '');\n\t\t\t\tif (id) {\n\t\t\t\t\tpanel.id = id + '-sub';\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (panel.id) {\n\t\t\t\tbtn.setAttribute('area-controls', panel.id);\n\t\t\t}\n\t\t\tbtn.addEventListener('click', e => {\n\t\t\t\tif (btn.classList.contains(MenuSimplex.CLS_OPENED)) {\n\t\t\t\t\tthis.close(it);\n\t\t\t\t} else {\n\t\t\t\t\tif (this.#ulBar === li.parentElement) {\n\t\t\t\t\t\tthis.closeAll(its, btn);\n\t\t\t\t\t}\n\t\t\t\t\tthis.open(it);\n\t\t\t\t}\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t\t}\n\t\twindow.addEventListener('keydown', (e) => {\n\t\t\tif ('Escape' === e.key) {\n\t\t\t\tconst it = this.#curIts.at(-1);\n\t\t\t\tif (it) {\n\t\t\t\t\tconst { btn } = it;\n\t\t\t\t\tif (btn) {\n\t\t\t\t\t\tbtn.focus();\n\t\t\t\t\t\tbtn.click();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tif (MenuSimplex.getStylePropertyBool(this.#divRoot, MenuSimplex.CP_IS_CLOSED_AUTO)) {\n\t\t\tdocument.addEventListener('DOMContentLoaded', () => {\n\t\t\t\twindow.addEventListener('scroll', MenuSimplex.throttle(() => this.doOnScroll(its)), { passive: true });\n\t\t\t});\n\t\t\tdocument.addEventListener('click', () => this.closeAll(its));\n\t\t}\n\t}\n\n\tprivate initOrder(its: Item[]): number[] {\n\t\tconst rev = MenuSimplex.getStylePropertyBool(this.#divRoot, MenuSimplex.CP_IS_REVERSED);\n\n\t\tconst ws = new Array(its.length);\n\t\tfor (let i = 0; i < its.length; i += 1) {\n\t\t\tconst { li } = its[i];\n\t\t\tws[i] = this.getWeightFromClass(li, rev ? i : its.length - i);\n\t\t}\n\t\tconst order = new Array(its.length);\n\t\tfor (let i = 0; i < its.length; i += 1) order[i] = i;\n\t\torder.sort((a: number, b: number) => ws[a] < ws[b] ? 1 : ws[a] > ws[b] ? -1 : 0);\n\n\t\treturn order;\n\t}\n\n\tprivate getWeightFromClass(li: Element, def: number): number {\n\t\tconst cs = li.className.split(' ');\n\t\tlet w: number|null = null;\n\t\tfor (const c of cs) {\n\t\t\tconst n = parseInt(c, 10);\n\t\t\tif (isNaN(n)) continue;\n\t\t\tif (null === w || w < n) w = n;\n\t\t}\n\t\treturn w ?? def;\n\t}\n\n\tprivate initFocusTrap(): HTMLElement {\n\t\tconst e = document.createElement('li');\n\t\te.className = MenuSimplex.CLS_FOCUS_TRAP;\n\t\te.tabIndex  = 0;\n\t\te.addEventListener('focus', () => {\n\t\t\tif (this.#curIts.length) {\n\t\t\t\tconst { btn } = this.#curIts[0];\n\t\t\t\tif (btn) btn.focus();\n\t\t\t}\n\t\t});\n\t\treturn e;\n\t}\n\n\n\t// -------------------------------------------------------------------------\n\n\n\tprivate open(it: Item) {\n\t\tconst { li, btn, panel } = it;\n\t\tif (!btn || !panel) return;\n\n\t\tli.classList.add(MenuSimplex.CLS_OPENED);\n\t\tbtn.classList.add(MenuSimplex.CLS_OPENED);\n\t\tbtn.setAttribute('area-expanded', 'true');\n\t\tpanel.classList.add(MenuSimplex.CLS_ACTIVE);\n\n\t\tsetTimeout(() => panel.classList.add(MenuSimplex.CLS_OPENED), 0);\n\t\tthis.#curIts.push(it);\n\n\t\tpanel.style.transform = '';\n\t\tif (this.#curIts[0].panel) {\n\t\t\tthis.adjustPanelInline(this.#curIts[0].panel);\n\t\t}\n\t\tthis.#scrollY = window.scrollY;\n\n\t\tif (1 === this.#curIts.length) {\n\t\t\tif(li.classList.contains(MenuSimplex.CLS_MORE)) {\n\t\t\t\tthis.#ulMore.appendChild(this.#liFocusTrap);\n\t\t\t} else {\n\t\t\t\tconst ul = ('UL' === panel.tagName) ? panel : panel.getElementsByTagName('ul')?.[0];\n\t\t\t\tul?.appendChild(this.#liFocusTrap);\n\t\t\t}\n\t\t\tif (MenuSimplex.getStylePropertyBool(this.#divRoot, MenuSimplex.CP_IS_BG_FIXED)) {\n\t\t\t\tthis.#skipResize = true;\n\t\t\t\tMenuSimplex.fixBackground(true);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate adjustPanelInline(panel: HTMLElement) {\n\t\tpanel.style.transform = '';\n\t\tpanel.style.maxWidth = '';\n\t\tlet pr = panel.getBoundingClientRect();\n\t\tconst rr = this.#divRoot.getBoundingClientRect();\n\t\tif (rr.width < pr.width) {\n\t\t\tpanel.style.maxWidth = `${rr.width}px`;\n\t\t\tpr = panel.getBoundingClientRect();\n\t\t}\n\t\tif (rr.right < pr.right) {\n\t\t\tpanel.style.transform = `translateX(${rr.right - pr.right}px)`;\n\t\t}\n\t\tif (pr.left < rr.left) {\n\t\t\tpanel.style.transform = `translateX(${pr.left - rr.left}px)`;\n\t\t}\n\t}\n\n\tprivate close(it: Item) {\n\t\tconst { li, btn, panel } = it;\n\t\tif (!btn || !panel) return;\n\n\t\tli.classList.remove(MenuSimplex.CLS_OPENED);\n\t\tbtn.classList.remove(MenuSimplex.CLS_OPENED);\n\t\tbtn.setAttribute('area-expanded', 'false');\n\t\tpanel.classList.remove(MenuSimplex.CLS_OPENED);\n\n\t\tsetTimeout(() => {\n\t\t\tpanel.classList.remove(MenuSimplex.CLS_ACTIVE);\n\t\t\tif (this.#curIts.length) {\n\t\t\t\tconst { panel } = this.#curIts[0];\n\t\t\t\tif (panel) this.adjustPanelInline(panel);\n\t\t\t}\n\t\t}, 200);\n\t\tthis.#curIts.pop();\n\n\t\tif (0 === this.#curIts.length) {\n\t\t\tconst ul = ('UL' === panel.tagName) ? panel : panel.getElementsByTagName('ul')?.[0];\n\t\t\tif (ul && this.#liFocusTrap.parentElement === ul) {\n\t\t\t\tul.removeChild(this.#liFocusTrap);\n\t\t\t}\n\t\t\tif (MenuSimplex.getStylePropertyBool(this.#divRoot, MenuSimplex.CP_IS_BG_FIXED)) {\n\t\t\t\tthis.#skipResize = true;\n\t\t\t\tMenuSimplex.fixBackground(false);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate closeAll(its: Item[], opening: HTMLElement|null = null) {\n\t\tif (!this.#curIts.length) return;\n\n\t\tfor (const it of its) {\n\t\t\tconst { btn } = it;\n\t\t\tif (btn && opening !== btn) {\n\t\t\t\tthis.close(it);\n\t\t\t}\n\t\t}\n\t\tthis.#curIts.length = 0;\n\n\t\tif (MenuSimplex.getStylePropertyBool(this.#divRoot, MenuSimplex.CP_IS_BG_FIXED)) {\n\t\t\tthis.#skipResize = true;\n\t\t\tMenuSimplex.fixBackground(false);\n\t\t}\n\t}\n\n\tprivate doOnScroll(its: Item[]) {\n\t\tif (!this.#curIts.length || !this.#curIts[0].panel) {\n\t\t\treturn;\n\t\t}\n\t\tconst bcr = this.#curIts[0].panel.getBoundingClientRect();\n\t\tif (\n\t\t\tbcr.bottom < 0 ||  // When not fixed\n\t\t\t(0 < bcr.top && bcr.bottom < Math.abs(window.scrollY - this.#scrollY))  // When fixed\n\t\t) {\n\t\t\tthis.closeAll(its);\n\t\t}\n\t}\n\n\tprivate alignItems(its: Item[], order: number[]) {\n\t\tthis.setMaxWidth();\n\t\tconst inBar = this.calcItemPlace(its, order);\n\t\tits[this.#moreIdx].li.style.display = inBar[this.#moreIdx] ? '' : 'none';\n\t\tthis.setCollapsedState(inBar);\n\n\t\tconst changeCls = (e: HTMLElement|null, b: string, a: string) => {\n\t\t\te?.classList.remove(b);\n\t\t\te?.classList.add(a);\n\t\t};\n\n\t\tlet prevElm = this.#ulBar.firstChild as HTMLElement;\n\t\tfor (let i = 0; i < its.length; i += 1) {\n\t\t\tconst { li, panel, menu } = its[i];\n\t\t\tif (inBar[i]) {\n\t\t\t\tif (li.parentElement === this.#ulBar) {\n\t\t\t\t\tli.style.flexGrow = '0';\n\t\t\t\t\tits[i].width = li.offsetWidth;\n\t\t\t\t\tli.style.flexGrow = '';\n\t\t\t\t}\n\t\t\t\tthis.#ulBar.insertBefore(li, prevElm.nextElementSibling);\n\t\t\t\tprevElm = li;\n\t\t\t\tchangeCls(panel, MenuSimplex.CLS_IN_MORE, MenuSimplex.CLS_IN_BAR);\n\t\t\t\tif (panel !== menu) changeCls(menu, MenuSimplex.CLS_IN_MORE, MenuSimplex.CLS_IN_BAR);\n\t\t\t} else if(i !== this.#moreIdx) {\n\t\t\t\tthis.#ulMore.appendChild(li);\n\t\t\t\tchangeCls(panel, MenuSimplex.CLS_IN_BAR, MenuSimplex.CLS_IN_MORE);\n\t\t\t\tif (panel !== menu) changeCls(menu, MenuSimplex.CLS_IN_BAR, MenuSimplex.CLS_IN_MORE);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate setMaxWidth() {\n\t\tconst p = this.#divRoot.parentElement;\n\t\tif (p) {\n\t\t\tconst s = getComputedStyle(p);\n\t\t\tconst w = p.clientWidth - (parseFloat(s.paddingLeft) + parseFloat(s.paddingRight));\n\t\t\tthis.#divRoot.style.setProperty(MenuSimplex.CP_MAX_WIDTH, `${Math.floor(w)}px`);\n\t\t}\n\t}\n\n\tprivate setCollapsedState(inBar: boolean[]) {\n\t\tif (inBar[this.#moreIdx]) {\n\t\t\tthis.#divRoot.classList.add(MenuSimplex.CLS_IS_COLLAPSED);\n\t\t} else {\n\t\t\tthis.#divRoot.classList.remove(MenuSimplex.CLS_IS_COLLAPSED);\n\t\t}\n\t\tif (inBar.every((e, i) => (i === this.#moreIdx || !e))) {\n\t\t\tthis.#divRoot.classList.add(MenuSimplex.CLS_IS_COLLAPSED_ALL);\n\t\t} else {\n\t\t\tthis.#divRoot.classList.remove(MenuSimplex.CLS_IS_COLLAPSED_ALL);\n\t\t}\n\t}\n\n\tprivate calcItemPlace(its: Item[], order: number[]): boolean[] {\n\t\tconst inBar = new Array(its.length);\n\t\tswitch (MenuSimplex.getStylePropertyString(this.#divRoot, MenuSimplex.CP_COLLAPSED)) {\n\t\t\tcase 'never':\n\t\t\t\tinBar.fill(true);\n\t\t\t\tinBar[this.#moreIdx] = false;\n\t\t\t\treturn inBar;\n\t\t\tcase 'always':\n\t\t\t\tinBar.fill(false);\n\t\t\t\tinBar[this.#moreIdx] = true;\n\t\t\t\treturn inBar;\n\t\t}\n\t\tfor (let i = 0; i < its.length; i += 1) {\n\t\t\tif (0 === its[i].width) its[i].width = its[i].li.offsetWidth;\n\t\t}\n\t\tconst gap  = this.calcBarGap();\n\t\tconst sumW = its.reduce((s: number, v: Item) => s + v.width, 0) + (gap * (its.length - 1)) - (its[this.#moreIdx].width + gap);\n\t\tlet barW   = this.calcBarWidth();\n\n\t\tif (barW < sumW) {\n\t\t\tbarW -= its[this.#moreIdx].width;\n\t\t\tinBar[this.#moreIdx] = true;\n\n\t\t\tfor (const idx of order) {\n\t\t\t\tif (idx !== this.#moreIdx) {\n\t\t\t\t\tbarW -= its[idx].width + gap;\n\t\t\t\t\tinBar[idx] = (0 <= barW);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tinBar.fill(true);\n\t\t\tinBar[this.#moreIdx] = false;\n\t\t}\n\t\treturn inBar;\n\t}\n\n\tprivate calcBarWidth(): number {\n\t\tthis.#ulBar.style.width = '0';\n\t\tlet w = Math.floor(this.#divRoot.getBoundingClientRect().width);\n\n\t\tif (0 === w && this.#divRoot.parentElement) {\n\t\t\tconst s = getComputedStyle(this.#divRoot.parentElement);\n\t\t\tif (s.display.endsWith('flex')) {\n\t\t\t\tthis.#divRoot.style.flexGrow = '1';\n\t\t\t\tw = Math.floor(this.#divRoot.getBoundingClientRect().width);\n\t\t\t\tthis.#divRoot.style.flexGrow = '';\n\t\t\t}\n\t\t}\n\n\t\tthis.#ulBar.style.width = '';\n\t\treturn w;\n\t}\n\n\tprivate calcBarGap(): number {\n\t\tconst s = getComputedStyle(this.#ulBar);\n\t\tconst g = parseInt(s.columnGap, 10);\n\t\treturn Number.isNaN(g) ? 0 : g;\n\t}\n\n}\n\nclass Item {\n\n\tconstructor(public li:HTMLElement, public btn:HTMLElement|null, public panel:HTMLElement|null, public menu:HTMLElement|null, public width: number) {\n\t\tthis.li    = li;\n\t\tthis.btn   = btn;\n\t\tthis.panel = panel;\n\t\tthis.menu  = menu;\n\t\tthis.width = width;\n\t}\n\n}\n"],
  "mappings": "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",
  "names": ["fn", "isRunning", "run", "tars", "tn", "p", "s", "w", "tar", "root", "elms", "enter", "e", "li", "elm", "leave", "it", "fec", "f", "enabled", "se", "sy", "cs", "mw", "ss", "key", "value", "prop", "v", "#divRoot", "#ulBar", "#ulMore", "#liFocusTrap", "#moreIdx", "#scrollY", "#curIts", "#skipResize", "#doWrapPanel", "id", "divRoot", "its", "order", "allLis", "onResize", "ro", "idx", "pos", "btn", "uls", "menu", "d", "panel", "menuMore", "Item", "rev", "ws", "i", "a", "b", "def", "c", "n", "pr", "rr", "ul", "opening", "bcr", "inBar", "changeCls", "prevElm", "gap", "sumW", "barW", "g", "width"]
}
